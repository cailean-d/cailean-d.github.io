<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        const domains = [
            "https://www.domain1.com",
            "https://www.domaine2.com",
            "http://localhost:5500",
            "https://cailean.cf"
        ]
        window.addEventListener("message", messageHandler, false);

        function messageHandler(event) {
            console.log(event.origin)
            // if (!domains.includes(event.origin))
            //     return;
            const { action, key, value } = event.data
            if (action == 'save'){
                window.localStorage.setItem(key, JSON.stringify(value))
            } else if (action == 'get') {
                let value = JSON.parse(window.localStorage.getItem(key))
                event.source.postMessage({
                action: 'returnData',
                key,
                value
                }, '*')
            }
        }
    </script>
</body>
</html>