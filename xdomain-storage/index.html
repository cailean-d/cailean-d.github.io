<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #receiver {
            display: none;
        }
    </style>
</head>
<body>
    <iframe id="receiver" src="iframe.html"></iframe>

    <p>
        <input type="text" id="key" placeholder="key">
        <input type="text" id="value" placeholder="value">
        <button id="send">Send Data</button>
        <button id="rec">Rec Data</button>
    </p>
        

    <script>
    
        const iframe = document.getElementById('receiver')
        const key = document.querySelector('#key');
        const value = document.querySelector('#value');

        document.querySelector('#send').onclick = _ => {
            setData(key.value, value.value);
        }

        document.querySelector('#rec').onclick = _ => {
            getData(key.value);
        }

        
        window.addEventListener("message", messageHandler, false);

        function messageHandler(e) {

            const { action, key, value } = e.data

            if (action == 'returnData'){
                console.log(key, value);
                alert(key, value)
            }
        }

        function setData(key, value) {
            iframe.contentWindow.postMessage({ action: 'save', key: key, value: value }, '*')
        }

        function getData(key) {
            iframe.contentWindow.postMessage({ action: 'get', key: key }, '*')
        }
    </script>
</body>
</html>