<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #receiver {
            display: none;
        }
    </style>
</head>
<body>
    <iframe id="receiver" src="https://cailean.cf/xdomain-storage/iframe.html"></iframe>


        <p>
        <button id="send">Send Data</button>
        <button id="rec">Rec Data</button>
        </p>
        

        <script>
        
        const data =  4444/* doSomeThingToGetData() */
        const iframe = document.getElementById('receiver')

        document.querySelector('#send').onclick = _ => {
            console.log('sending...')
            iframe.contentWindow.postMessage({
                action: 'save',
                key: 'keyForData',
                value: data
            })
        }

        document.querySelector('#rec').onclick = _ => {
            iframe.contentWindow.postMessage({
            action: 'get',
            key: 'keyForData'
            })
        }


            
            window.addEventListener("message", messageHandler, false);
            function messageHandler(event) {
                console.log(event)
            const { action, key, value } = event.data
            if (action == 'returnData'){
                // useData(key, value)
                console.log(key, value);
            }
        }
        </script>
</body>
</html>