(function(){const a=a=>document.querySelector(a),b=(a,b,c)=>a.addEventListener(b,c),c=a(".modal-image"),d=a(".img-selected-area"),e=(a=>document.querySelectorAll(a))("a"),f=a(".x-coord span"),g=a(".y-coord span"),h=a(".original-coords span"),i=a(".selected-coords span"),j=a(".corner-coords"),k=a(".modal"),l=a(".modal-close"),m="z";let n,o,p,q,r,s=!1,t=!1;const u=a=>({imgSource:a.href,linkType:a.getAttribute("type"),x1:+a.getAttribute("x"),y1:+a.getAttribute("y"),x2:+a.getAttribute("x1"),y2:+a.getAttribute("y1")}),v=(a,b)=>{const{height:d,width:e}=c;return{x:Math.round((r.x2-r.x1)*(a/e)+r.x1),y:Math.round((r.y2-r.y1)*(b/d)+r.y1)}},w=()=>({width:Math.abs(p-n),height:Math.abs(q-o),x:n<p?n:p,y:o<q?o:q}),x=()=>{const{x:a,y:b,width:c,height:d}=w(),{x:e,y:f}=v(a,b),{x:g,y:h}=v(a+c,b+d);i.innerHTML=`${e}, ${f}, ${g}, ${h}`},y=()=>{i.innerHTML=``},z=(a,b,c,d)=>{h.innerHTML=`${a}, ${b}, ${c}, ${d}`},A=()=>{const a=w();d.style.top=`${a.y}px`,d.style.left=`${a.x}px`,d.style.height=`${a.height}px`,d.style.width=`${a.width}px`,d.style.display="block"},B=()=>{d.style.display="none"},C=a=>{"keydown"===a.type&&a.key===m&&(s=!0),"keyup"===a.type&&a.key===m&&(s=!1)},D=a=>{"mousedown"==a.type&&1===a.which?t=!0:"mouseup"===a.type&&1===a.which&&(t=!1)},E=a=>{"mousedown"===a.type&&1===a.which&&s&&(n=p=a.offsetX,o=q=a.offsetY)},F=a=>{t&&s&&(p=a.offsetX,q=a.offsetY,x(),A())},G=()=>{k.style.display="block"},H=()=>{j.innerHTML=`(${r.x2}, ${r.y2})`},I=()=>{c.src=r.imgSource,z(r.x1,r.y1,r.x2,r.y2),H()},J=a=>{r=u(a.target);"screenShot"!==r.linkType||(a.preventDefault(),I(),G())};b(c,"mousedown",D),b(c,"mousedown",E),b(c,"mouseup",D),b(c,"mouseup",a=>{"mouseup"===a.type&&1===a.which&&B()}),b(c,"mouseup",a=>{"mouseup"===a.type&&1===a.which&&y()}),b(c,"mousemove",a=>{const b=0<a.offsetX?a.offsetX:0,c=0<a.offsetY?a.offsetY:0,{x:d,y:e}=v(b,c);f.innerHTML=`${d}`,g.innerHTML=`${e}`}),b(c,"mousemove",F),b(window,"keydown",C),b(window,"keyup",C),b(l,"click",()=>{k.style.display="none",B(),s=!1,t=!1}),e.forEach(a=>b(a,"click",J))})();